<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AdminXpress</title>
  <link rel="stylesheet" href="insumos.css" />
</head>
<body>

    <nav class="navbar">
        <div class="logo">
            <div class="logo-icon">
                <img src="./iconos/qfes-30.png" alt="logo">
            </div>
            <span>AdminXpress</span>
        </div>
        
    <div class="tabs-container">

     <a href="/Ventas/ind3..html" class="tab-link">
        <div class="tab-svg-inline">
            <svg width="207" height="57" viewBox="0 0 207 57" fill="none">
                <path d="M12.6502 5.94966C14.0433 1.9203 17.8379 -0.782715 22.1013 -0.782715H183.738C188.056 -0.782715 191.886 1.98855 193.236 6.0897L205.677 43.8725C207.807 50.341 202.989 57 196.179 57H9.03823C2.16578 57 -2.65849 50.2276 -0.412837 43.7324L12.6502 5.94966Z" fill="#549274"/>
            </svg>
            <div class="tab-text">
                <svg class="tab-icon" viewBox="0 0 24 24">
                    <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H18V0h-2v2H8V0H6v2H3.5C2.67 2 2 2.67 2 3.5v16C2 20.33 2.67 21 3.5 21h15c.83 0 1.5-.67 1.5-1.5v-16C20 2.67 19.33 2 18.5 2z"/>
                </svg>
                <img src="./iconos/Frame.svg" alt="carrito de compras">
                Ventas
            </div>
        </div>  
        </a> 
     <a href="/HTML/VistaProductos/index.html" class="tab-link"> 
        <div class="tab-svg-inline">
            <svg width="207" height="57" viewBox="0 0 207 57" fill="none">
                <path d="M12.6502 5.94966C14.0433 1.9203 17.8379 -0.782715 22.1013 -0.782715H183.738C188.056 -0.782715 191.886 1.98855 193.236 6.0897L205.677 43.8725C207.807 50.341 202.989 57 196.179 57H9.03823C2.16578 57 -2.65849 50.2276 -0.412837 43.7324L12.6502 5.94966Z" fill="#549274"/>
            </svg>
            <div class="tab-text">
                <svg class="tab-icon" viewBox="0 0 24 24">
                    <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H18V0h-2v2H8V0H6v2H3.5C2.67 2 2 2.67 2 3.5v16C2 20.33 2.67 21 3.5 21h15c.83 0 1.5-.67 1.5-1.5v-16C20 2.67 19.33 2 18.5 2z"/>
                </svg>
                <img src="./iconos/Frame (1).svg" alt="carrito de compras">
                Productos
            </div>
        </div>
        </a>
    <a href="/Reportes/Reportes.html" class="tab-link"> 
        <div class="tab-svg-inline">
            <svg width="207" height="57" viewBox="0 0 207 57" fill="none">
                <path d="M12.6502 5.94966C14.0433 1.9203 17.8379 -0.782715 22.1013 -0.782715H183.738C188.056 -0.782715 191.886 1.98855 193.236 6.0897L205.677 43.8725C207.807 50.341 202.989 57 196.179 57H9.03823C2.16578 57 -2.65849 50.2276 -0.412837 43.7324L12.6502 5.94966Z" fill="#549274"/>
            </svg>
            <div class="tab-text">
                <svg class="tab-icon" viewBox="0 0 24 24">
                    <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H18V0h-2v2H8V0H6v2H3.5C2.67 2 2 2.67 2 3.5v16C2 20.33 2.67 21 3.5 21h15c.83 0 1.5-.67 1.5-1.5v-16C20 2.67 19.33 2 18.5 2z"/>
                </svg>
                <img src="./iconos/Frame (2).svg" alt="carrito de compras">
                Reportes
            </div>
        </div>
    </a>
    <a href="/Vista insumos/insumo.html" class="tab-link"> 
        <div class="tab-svg-inline">
            <svg width="207" height="57" viewBox="0 0 207 57" fill="none">
                <path d="M12.6502 5.94966C14.0433 1.9203 17.8379 -0.782715 22.1013 -0.782715H183.738C188.056 -0.782715 191.886 1.98855 193.236 6.0897L205.677 43.8725C207.807 50.341 202.989 57 196.179 57H9.03823C2.16578 57 -2.65849 50.2276 -0.412837 43.7324L12.6502 5.94966Z" fill="#549274"/>
            </svg>
            <div class="tab-text">
                <svg class="tab-icon" viewBox="0 0 24 24">
                    <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H18V0h-2v2H8V0H6v2H3.5C2.67 2 2 2.67 2 3.5v16C2 20.33 2.67 21 3.5 21h15c.83 0 1.5-.67 1.5-1.5v-16C20 2.67 19.33 2 18.5 2z"/>
                </svg>
                <img src="./iconos/Vector.svg" alt="carrito de compras">
                Insumos
            </div>
        </div>
    </a> 
    <a href="/VistaConfiguracion/confi.html" class="tab-link"> 
        <div class="tab-svg-inline">
            <svg width="207" height="57" viewBox="0 0 207 57" fill="none">
                <path d="M12.6502 5.94966C14.0433 1.9203 17.8379 -0.782715 22.1013 -0.782715H183.738C188.056 -0.782715 191.886 1.98855 193.236 6.0897L205.677 43.8725C207.807 50.341 202.989 57 196.179 57H9.03823C2.16578 57 -2.65849 50.2276 -0.412837 43.7324L12.6502 5.94966Z" fill="#549274"/>
            </svg>
            <div class="tab-text">
                <svg class="tab-icon" viewBox="0 0 24 24">
                    <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H18V0h-2v2H8V0H6v2H3.5C2.67 2 2 2.67 2 3.5v16C2 20.33 2.67 21 3.5 21h15c.83 0 1.5-.67 1.5-1.5v-16C20 2.67 19.33 2 18.5 2z"/>
                </svg>
                <img src="./iconos/Frame (4).svg" alt="carrito de compras">
                Configuración
            </div>
        </div>
    </a>
    </div>
    </nav>

  <div class="search-actions">
      <div class="search-container">
        <input type="text" id="searchInput" placeholder="Buscar insumo por nombre..." 
              onkeyup="buscarInsumosPorNombre()">
      </div>
      <div class="action-buttons">
        <button class="action-btn btn-historial" id="btnHistorial" disabled onclick="openHistorialModal()">Historial</button>

         <button class="action-btn btn-update" id="btnUpdate" disabled onclick="openModal('updateModal')">Actualizar</button>
        <button class="action-btn btn-edit" id="btnEdit" disabled onclick="openModal('editModal')">Editar</button>
        <button class="action-btn btn-add" onclick="openModal('addModal')">Agregar</button>
        <button class="action-btn btn-delete" id="btnDelete" disabled onclick="openModal('deleteModal')">Eliminar</button>
      </div>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Clave</th>
          <th>Nombre</th>
          <th>Stock actual</th>
          <th>Unidad</th>
          <th>Caducidad</th>
          <th>Precio</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>001</td>
          <td>Materia Prima A</td>
          <td>0</td>
          <td>Kg</td>
          <td>2024-12-31</td>
          <td>$150.00</td>
          <td class="status"><div class="dot red"></div>Sin stock</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal para Agregar -->
  <div id="addModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Materia prima</h2>
        <span class="close" onclick="closeModal('addModal')">&times;</span>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="addNombre">Nombre</label>
          <input type="text" id="addNombre" name="nombre" placeholder="Ingrese el nombre" required>
          <span class="error-text"  id="error-nombre">*Este campo es requerido</span>
        </div>
        <div class="form-group">
          <label for="addUnidad">Unidad de medida</label>
          <select id="addUnidad" name="unidad" required>
            <option value="">Seleccione una unidad</option>
            <option value="kg">Kilogramos (kg)</option>
            <option value="l">Litros (l)</option>
            <option value="gr">Gramos (gr)</option>
            <option value="ml">Mililitros (ml)</option> 
            <option value="pza">Piezas (pza)</option>    
          </select>
          <span class="error-text"  id="error-unidad">*Este campo es requerido</span>
        </div>
        <div class="form-group">
          <label for="addPrecio">Precio</label>
          <input type="number" id="addPrecio" name="precio" placeholder="0.00" step="0.01" required>
          <span class="error-text"  id="error-precio">*Este campo es requerido</span>
        </div>
        
        <div class="form-group">
          <label for="addStock">Stock actual</label>
          <input type="number" id="addStock" name="stock" placeholder="0" required>
          <span class="error-text"  id="error-stock">*Este campo es requerido</span>
        </div>
        <div class="form-group">
          <label for="addStock">Stock minimo</label>
          <input type="number" id="addStock-minimo" name="stock-minimo" placeholder="0" required>
          <span class="error-text" id="error-stockM">*Este campo es requerido</span>
        </div>
        <div class="form-group">
          <label for="addCaducidad">Fecha de caducidad</label>
          <input type="date" id="addCaducidad" name="caducidad">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-modal btn-success" onclick="validarFormulario('addModal')">Agregar</button>
      </div>
    </div>
  </div>

  <!-- Modal para Editar -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Actualizar Materia Prima</h2>
        <span class="close" onclick="closeModal('editModal')">&times;</span>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="editNombre">Nombre</label>
          <input type="text" id="editNombre" name="nombre" required>
          <span class="error-text">*Este campo es requerido</span>
        </div>
        <div class="form-group">
          <label for="editUnidad">Unidad de medida</label>
          <select id="editUnidad" name="unidad" required>
            <option value="">Seleccione una unidad</option>
            <option value="kg">Kilogramos (kg)</option>
            <option value="l">Litros (l)</option>
            <option value="gr">Gramos (gr)</option>
            <option value="ml">Mililitros (ml)</option> 
            <option value="pza">Piezas (pza)</option>  
          </select>
          <span class="error-text">*Este campo es requerido</span>
        </div>
        <div class="form-group">
          <label for="editPrecio">Precio</label>
          <input type="number" id="editPrecio" name="precio" step="0.01" required>
          <span class="error-text">*Este campo es requerido</span>
        </div>
        <div class="form-group">
          <label for="editStock">Stock actual</label>
          <input type="number" id="editStock" name="stock" required>
          <span class="error-text">*Este campo es requerido</span>
        </div>
         <div class="form-group">
          <label for="addStock">Stock minimo</label>
          <input type="number" id="editStock-minimo" name="stock-minimo" placeholder="0" required>
          <span class="error-text">*Este campo es requerido</span>
        </div>
        <div class="form-group">
          <label for="editCaducidad">Fecha de caducidad</label>
          <input type="date" id="editCaducidad" name="caducidad" required>
          <span class="error-text">*Este campo es requerido</span>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-modal btn-success" onclick="validarFormulario('editModal')">Guardar cambios</button>
      </div>
    </div>
  </div>


<!-- Modal para Actualizar Stock -->
<div id="updateModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Actualizar Stock</h2>
      <span class="close" onclick="closeModal('updateModal')">&times;</span>
    </div>
    <div class="modal-body">
      
      <div class="form-group">
        <label for="updatePrecio">Precio Unitario</label>
        <input type="number" id="updatePrecio" name="precio" step="0.01" required>
      </div>
      <div class="form-group">
        <label for="updateStock">Nuevo Stock</label>
        <input type="number" id="updateStock" name="stock" placeholder="Ingrese el nuevo stock total" required>
      </div>
      <div class="form-group">
        <label for="updateCaducidad">Nueva Fecha de Caducidad</label>
        <input type="date" id="updateCaducidad" name="caducidad">
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-modal btn-success" onclick="actualizarStock()">Actualizar</button>
    </div>
  </div>
</div>



  <!-- Modal para Eliminar -->
  <div id="deleteModal" class="modal">
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h2>Confirmar eliminación</h2>
        <span class="close" onclick="closeModal('deleteModal')">&times;</span>
      </div>
      <div class="modal-body">
        <p>¿Está seguro que desea eliminar este elemento?</p>
        <p><strong id="itemAEliminar">Materia Prima A</strong></p>
        <p>Esta acción no se puede deshacer.</p>
      </div>
      <div class="modal-footer">
        <button class="btn-modal btn-cancel" onclick="closeModal('deleteModal')">Cancelar</button>
        <button class="btn-modal btn-danger" onclick="eliminarItem()">Eliminar</button>
      </div>
    </div>
  </div>


<!-- Modal para Historial -->
<div id="historialModal" class="modal">
  <div class="modal-content modal-large">
    <div class="modal-header">
      <h2>Historial de Stock - <span id="historialTitulo"></span></h2>
      <span class="close" onclick="closeModal('historialModal')">&times;</span>
    </div>
    <div class="modal-body">
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Fecha de compra</th>
              <th>Stock</th>
              <th>Precio de Compra</th>
              <th>Caducidad</th>
            </tr>
          </thead>
          <tbody id="historialBody">
            <!-- Aquí se cargarán los datos del historial -->
          </tbody>
        </table>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-modal btn-cancel" onclick="closeModal('historialModal')">Cerrar</button>
    </div>
  </div>
</div>


  <!-- Modal de Error -->
  <div id="errorModal" class="modal">
    <div class="modal-content modal-small">
      <div class="modal-header" style="background-color: #e74c3c;">
        <h2>Error</h2>
        <span class="close" onclick="closeModal('errorModal')">&times;</span>
      </div>
      <div class="modal-body">
        <p id="errorMessage">Por favor complete todos los campos requeridos.</p>
      </div>
      <div class="modal-footer">
        <button class="btn-modal btn-cancel" onclick="closeModal('errorModal')">Aceptar</button>
      </div>
    </div>
  </div>
  <script src="./insumos.js"></script>
</body>
</html>